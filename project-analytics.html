<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Analytics - WebsiteLaunchPad</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <span class="logo-icon">üöÄ</span>
                <span class="logo-text">WebsiteLaunchPad</span>
            </a>
            
            <div class="nav-menu">
                <a href="dashboard.html" class="nav-link">Dashboard</a>
                <a href="create-project.html" class="nav-link">Create Project</a>
                <a href="resources.html" class="nav-link">Resources</a>
                <a href="pricing.html" class="nav-link">Pricing</a>
                <div class="nav-user">
                    <span id="userName">User</span>
                    <div class="user-dropdown">
                        <a href="dashboard.html">My Profile</a>
                        <a href="#" class="logout-btn">Logout</a>
                    </div>
                </div>
            </div>
            
            <button class="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu">
        <a href="dashboard.html" class="mobile-nav-link">Dashboard</a>
        <a href="create-project.html" class="mobile-nav-link">Create Project</a>
        <a href="resources.html" class="mobile-nav-link">Resources</a>
        <a href="pricing.html" class="mobile-nav-link">Pricing</a>
        <a href="#" class="mobile-nav-link logout-btn">Logout</a>
    </div>

    <!-- Analytics Header -->
    <div class="analytics-header">
        <div class="container">
            <h1>Project Analytics</h1>
            <p>Track performance, progress, and milestones</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Progress Stats -->
        <div class="stats-grid" id="progressStats">
            <!-- Stats will be loaded dynamically -->
            <div class="stat-card">
                <h3>0%</h3>
                <p>Overall Progress</p>
            </div>
            <div class="stat-card">
                <h3>0/6</h3>
                <p>Steps Completed</p>
            </div>
            <div class="stat-card">
                <h3>0h</h3>
                <p>Time Spent</p>
            </div>
            <div class="stat-card">
                <h3>0</h3>
                <p>Milestones</p>
            </div>
        </div>

        <div class="dashboard-grid">
            <!-- Progress Timeline -->
            <div class="chart-container">
                <div class="chart-header">
                    <h2>Progress Timeline</h2>
                </div>
                <div class="chart-wrapper">
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>

            <!-- Time Distribution -->
            <div class="chart-container">
                <div class="chart-header">
                    <h2>Time Distribution</h2>
                </div>
                <div class="chart-wrapper">
                    <canvas id="timeDistributionChart"></canvas>
                </div>
            </div>

            <!-- Milestones -->
            <div class="chart-container">
                <div class="chart-header">
                    <h2>Milestones</h2>
                </div>
                <div class="milestone-grid" id="milestonesList">
                    <!-- Milestones will be loaded dynamically -->
                    <div class="milestone-card completed">
                        <div class="milestone-card-header">
                            <div class="milestone-icon">üöÄ</div>
                            <h3>Project Started</h3>
                        </div>
                        <p>Created your first project</p>
                        <div class="milestone-meta">
                            <span class="milestone-date">Today</span>
                            <span class="milestone-status completed">Completed</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Productivity Metrics -->
            <div class="chart-container">
                <div class="chart-header">
                    <h2>Productivity Metrics</h2>
                </div>
                <div class="metrics-grid">
                    <div class="metric-item">
                        <h3>Efficiency Score</h3>
                        <div class="metric-value">
                            <span id="efficiencyScore">0</span>
                            <span class="metric-unit">/100</span>
                        </div>
                        <div class="metric-bar">
                            <div class="metric-fill" id="efficiencyFill"></div>
                        </div>
                    </div>
                    
                    <div class="metric-item">
                        <h3>Daily Average</h3>
                        <div class="metric-value">
                            <span id="dailyAverage">0</span>
                            <span class="metric-unit">hours</span>
                        </div>
                    </div>
                    
                    <div class="metric-item">
                        <h3>Completion Rate</h3>
                        <div class="metric-value">
                            <span id="completionRate">0%</span>
                        </div>
                    </div>
                    
                    <div class="metric-item">
                        <h3>Estimated Completion</h3>
                        <div class="metric-value">
                            <span id="estimatedCompletion">0</span>
                            <span class="metric-unit">days</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Options -->
        <div class="chart-container">
            <div class="chart-header">
                <h2>Export Analytics</h2>
            </div>
            <div class="export-options">
                <button class="btn btn-outline" id="exportPDF">
                    <span class="export-icon">üìÑ</span>
                    Export as PDF
                </button>
                <button class="btn btn-outline" id="exportCSV">
                    <span class="export-icon">üìä</span>
                    Export as CSV
                </button>
                <button class="btn btn-outline" id="exportJSON">
                    <span class="export-icon">üìÅ</span>
                    Export as JSON
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 WebsiteLaunchPad. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Contact</a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/progress.js"></script>
    <script src="js/main.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize charts
            let timelineChart, distributionChart;
            
            function initCharts() {
                // Timeline Chart
                const timelineCtx = document.getElementById('timelineChart');
                if (timelineCtx) {
                    timelineChart = new Chart(timelineCtx, {
                        type: 'line',
                        data: {
                            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
                            datasets: [{
                                label: 'Progress %',
                                data: [10, 25, 45, 60, 80, 90],
                                borderColor: 'rgb(59, 130, 246)',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                fill: true,
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 100
                                }
                            }
                        }
                    });
                }
                
                // Time Distribution Chart
                const distributionCtx = document.getElementById('timeDistributionChart');
                if (distributionCtx) {
                    distributionChart = new Chart(distributionCtx, {
                        type: 'polarArea',
                        data: {
                            labels: ['Planning', 'Design', 'Development', 'Content', 'Testing', 'Launch'],
                            datasets: [{
                                data: [10, 25, 30, 15, 10, 10],
                                backgroundColor: [
                                    'rgba(59, 130, 246, 0.7)',
                                    'rgba(16, 185, 129, 0.7)',
                                    'rgba(245, 158, 11, 0.7)',
                                    'rgba(239, 68, 68, 0.7)',
                                    'rgba(139, 92, 246, 0.7)',
                                    'rgba(236, 72, 153, 0.7)'
                                ]
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false
                        }
                    });
                }
            }
            
            // Initialize charts
            initCharts();
            
            // Export functionality
            document.getElementById('exportPDF').addEventListener('click', function() {
                alert('PDF export feature would generate a downloadable report');
            });
            
            document.getElementById('exportCSV').addEventListener('click', function() {
                if (window.progressTracker) {
                    const csvData = window.progressTracker.exportProgressData('csv');
                    const blob = new Blob([csvData], { type: 'text/csv' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'project-analytics.csv';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }
            });
            
            document.getElementById('exportJSON').addEventListener('click', function() {
                if (window.progressTracker) {
                    const jsonData = window.progressTracker.exportProgressData('json');
                    const blob = new Blob([jsonData], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'project-analytics.json';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }
            });
        });
    </script>
</body>
</html>
